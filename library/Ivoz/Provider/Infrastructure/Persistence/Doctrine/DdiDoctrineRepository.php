<?php

namespace Ivoz\Provider\Infrastructure\Persistence\Doctrine;

use Doctrine\Bundle\DoctrineBundle\Repository\ServiceEntityRepository;
use Ivoz\Provider\Domain\Model\Ddi\Ddi;
use Ivoz\Provider\Domain\Model\Ddi\DdiInterface;
use Ivoz\Provider\Domain\Model\Ddi\DdiRepository;
use Doctrine\Persistence\ManagerRegistry;

/**
 * DdiDoctrineRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 *
 * @template-extends ServiceEntityRepository<Ddi>
 */
class DdiDoctrineRepository extends ServiceEntityRepository implements DdiRepository
{
    public function __construct(ManagerRegistry $registry)
    {
        parent::__construct($registry, Ddi::class);
    }

    /**
     * @param string $ddiE164
     * @return \Ivoz\Provider\Domain\Model\Ddi\DdiInterface | null
     */
    public function findOneByDdiE164($ddiE164)
    {
        /** @var DdiInterface $response */
        $response = $this->findOneBy([
            "ddie164" => $ddiE164
        ]);

        return $response;
    }

    /**
     * @return \Ivoz\Provider\Domain\Model\Ddi\DdiInterface | null
     */
    public function findOneByDdiAndCountry(string $ddi, int $countryId)
    {
        /** @var DdiInterface $response */
        $response = $this->findOneBy([
            'ddi' => $ddi,
            'country' => $countryId
        ]);

        return $response;
    }
}
